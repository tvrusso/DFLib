<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DFLib: /users/russo/DFLIB_Git/DFLib/SimpleDF.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DFLib<span id="projectnumber">&#160;Release 1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9669779df7bfcf1c7bf651204e08d102.html">users</a></li><li class="navelem"><a class="el" href="dir_09ed9f222f88e59fb3ce7c6cdebd7b6e.html">russo</a></li><li class="navelem"><a class="el" href="dir_7fc0e239ca4326abf9426d270b6131c3.html">DFLIB_Git</a></li><li class="navelem"><a class="el" href="dir_c2acaca68930fa6135dacd0eb7be8464.html">DFLib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">SimpleDF.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;proj.h&gt;</code><br />
<code>#include &quot;<a class="el" href="DFLib__Misc__Defs_8h.html">DFLib_Misc_Defs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DF__Proj__Point_8hpp.html">DF_Proj_Point.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DF__Report__Collection_8hpp.html">DF_Report_Collection.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DF__Proj__Report_8hpp.html">DF_Proj_Report.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Util__Misc_8hpp.html">Util_Misc.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for SimpleDF.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="SimpleDF_8cpp__incl.png" border="0" usemap="#a_2users_2russo_2DFLIB__Git_2DFLib_2SimpleDF_8cpp" alt=""/></div>
<map name="a_2users_2russo_2DFLIB__Git_2DFLib_2SimpleDF_8cpp" id="a_2users_2russo_2DFLIB__Git_2DFLib_2SimpleDF_8cpp">
<area shape="rect" title=" " alt="" coords="284,5,458,54"/>
<area shape="rect" title=" " alt="" coords="977,257,1037,287"/>
<area shape="rect" title=" " alt="" coords="63,102,138,132"/>
<area shape="rect" title=" " alt="" coords="162,102,231,132"/>
<area shape="rect" title=" " alt="" coords="264,335,326,365"/>
<area shape="rect" title=" " alt="" coords="114,257,172,287"/>
<area shape="rect" href="DFLib__Misc__Defs_8h.html" title=" " alt="" coords="356,102,492,132"/>
<area shape="rect" href="DF__Proj__Point_8hpp.html" title=" " alt="" coords="305,180,439,209"/>
<area shape="rect" href="DF__Report__Collection_8hpp.html" title=" " alt="" coords="516,102,698,132"/>
<area shape="rect" href="DF__Proj__Report_8hpp.html" title=" " alt="" coords="1036,102,1181,132"/>
<area shape="rect" href="Util__Misc_8hpp.html" title=" " alt="" coords="866,180,969,209"/>
<area shape="rect" href="DFLib__port_8h.html" title=" " alt="" coords="695,335,796,365"/>
<area shape="rect" title=" " alt="" coords="834,257,892,287"/>
<area shape="rect" href="DF__Abstract__Point_8hpp.html" title=" " alt="" coords="298,257,460,287"/>
<area shape="rect" href="Util__Abstract__Group_8hpp.html" title=" " alt="" coords="535,257,708,287"/>
<area shape="rect" href="DF__Abstract__Report_8hpp.html" title=" " alt="" coords="670,180,842,209"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6705b24943364e58fea3d52733cf2060"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleDF_8cpp.html#a6705b24943364e58fea3d52733cf2060">MAG_DEC</a>&#160;&#160;&#160;(9.8)</td></tr>
<tr class="separator:a6705b24943364e58fea3d52733cf2060"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9597e5e8b03274abc9a499484ce2a497"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleDF_8cpp.html#a9597e5e8b03274abc9a499484ce2a497">proj_dmstor</a> (const char *, char **)</td></tr>
<tr class="separator:a9597e5e8b03274abc9a499484ce2a497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bbaf61bdd53c73e5b167f522ca9683"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleDF_8cpp.html#a22bbaf61bdd53c73e5b167f522ca9683">printCoords</a> (const std::vector&lt; double &gt; &amp;latlon, const std::string &amp;text)</td></tr>
<tr class="separator:a22bbaf61bdd53c73e5b167f522ca9683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SimpleDF_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6705b24943364e58fea3d52733cf2060" name="a6705b24943364e58fea3d52733cf2060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6705b24943364e58fea3d52733cf2060">&#9670;&#160;</a></span>MAG_DEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAG_DEC&#160;&#160;&#160;(9.8)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627" name="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A very simple text-based DF fixing program demonstrating how to use <a class="el" href="namespaceDFLib.html">DFLib</a> classes.</p>
<p>SimpleDF takes as command line argument the name of a text file with lines in the following format:</p>
<p>NAME LONGITUDE LATITUDE BEARING Datum STDDEV VALID</p>
<p>where longitude and latitude are in PROJ.4 format, Bearing is magnetic bearing IN CENTRAL NEW MEXICO IN 2009, Datum is 1 for WGS84/NAD83 and 0 for NAD27, stddev is the standard deviation of bearing error expected for the equipment and user, and VALID is 0 for invalid and 1 for valid reports.</p>
<p>The magnetic declination is hard-coded here as 9.8 degrees, which is the correct declination in Albuquerque, NM in mid-2009. The user must change the appropriate line of code to fix this for the region and date.</p>
<p>The DF reports in the input file are input into a <a class="el" href="classDFLib_1_1ReportCollection.html">DFLib::ReportCollection</a>, and the various DF fixes computed. The fixes are printed to standard output.</p>
<p>This primitive program shows how to use the <a class="el" href="namespaceDFLib.html">DFLib</a> report classes. It does very little error checking of the fixes after they're computed. <a class="el" href="testlsDF__proj_8cpp.html">testlsDF_proj.cpp</a> actually does more error checking. This program is not intended as a finished product, but as a demo.</p>
<p>The program was not updated to compute Stansfield fix after the Stansfield fix was implemented in <a class="el" href="namespaceDFLib.html">DFLib</a>.</p>
<p>Neither was the program updated to compute the Maximum Likelihood fix more aggressively than by the conjugate gradient method. See the program "<a class="el" href="testlsDF__proj_8cpp.html">testlsDF_proj.cpp</a> for how to call the more aggressive ML computation when the simple conjugate gradients method fails due to flatness of the cost surface.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="SimpleDF_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph.png" border="0" usemap="#aSimpleDF_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" alt=""/></div>
<map name="aSimpleDF_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" id="aSimpleDF_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph">
<area shape="rect" title=" " alt="" coords="5,419,57,448"/>
<area shape="rect" href="classDFLib_1_1ReportCollection.html#ae9f1b6bf5605ae826957c6dcdd4a18ea" title="Add a DF report to the collection." alt="" coords="113,79,280,127"/>
<area shape="rect" href="classDFLib_1_1ReportCollection.html#a1a6391703b54c14f3e0dd2f0194ef0fa" title="return the fix cut average of this collection&#39;s reports" alt="" coords="109,152,284,201"/>
<area shape="rect" href="classDFLib_1_1ReportCollection.html#a4f37e88da4347af97dfdc2f7ac63f6f1" title="Computes least squares solution of DF problem." alt="" coords="105,225,288,274"/>
<area shape="rect" href="classDFLib_1_1ReportCollection.html#adffd170257322f58734acb369bb720a4" title="Computes Maximum Likelihood solution of DF problem." alt="" coords="113,299,280,347"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Exception.html#a876b19f7490acabe87a6b5e4e4c6d31c" title=" " alt="" coords="120,372,273,421"/>
<area shape="rect" href="classDFLib_1_1Proj_1_1Point.html#ad1d0b8c5594fee59452dfc804a4c8619" title="get user position" alt="" coords="132,445,260,494"/>
<area shape="rect" href="SimpleDF_8cpp.html#a22bbaf61bdd53c73e5b167f522ca9683" title=" " alt="" coords="149,518,244,547"/>
<area shape="rect" href="SimpleDF_8cpp.html#a9597e5e8b03274abc9a499484ce2a497" title=" " alt="" coords="148,571,244,600"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Report.html#ad79e7a5839266eb0b4cef3c1c53b9bfa" title="Set this report as invalid." alt="" coords="113,624,280,673"/>
<area shape="rect" href="classDFLib_1_1ReportCollection.html#af32ee1b774898f0ecb2626d44e5f34e0" title=" " alt="" coords="113,697,280,746"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Point.html#a8934b76a660dbf3afb18e93c1c87704b" title="Clone Self." alt="" coords="358,5,513,54"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Point.html#aeedebd9ab799d276ef3c9bffa76c3f82" title="Get coordinates in the user&#39;s coordinate system." alt="" coords="358,79,513,127"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Point.html#a4efcb702d48928c1de1053b5ed00a2d8" title="Set coordinates in the user&#39;s coordinate system." alt="" coords="358,152,513,201"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Point.html#adec4bffdb7ccebcef10e3105f90bc2bd" title="Set X&#45;Y coordinates of the point." alt="" coords="358,225,513,274"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Point.html#a5eb6bedf8a7d33d0061f4b8bb3787552" title="Get X&#45;Y coordinates of the point." alt="" coords="358,299,513,347"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#a345f790e649eaf0092e5590e3e21acd7" title="minimize function of vector value by method of conjugate gradients" alt="" coords="336,372,535,421"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Group.html#a82c14ff935f1152550862ce916112483" title=" " alt="" coords="1190,311,1407,359"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#af8044e0bb85656cbdf67f40f673cb82e" title="minimize function in given direction perform a line search along the given direction for the minimum ..." alt="" coords="583,403,738,451"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Group.html#ad00c7b727dc9a41733a454dd69f1c0ea" title="Set the point at which to evaluate the function." alt="" coords="1217,403,1380,451"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#a5e4b72771d67e950842a6fa8cebe2583" title="bracket minimum of function" alt="" coords="786,476,940,525"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#a974666891284930ce15f2f1b80ed45c6" title="minimize by Brent&#39;s method with derivatives given a,b,c scalars that bracket the minimum in given dir..." alt="" coords="786,403,940,451"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#ac1a357c746cdefe2f20d8784f1f00ab4" title="Evaluate &#160;where x0 and dir are vectors." alt="" coords="988,476,1142,525"/>
<area shape="rect" href="classDFLib_1_1Abstract_1_1Group.html#a56e8978276976b053afac5939c0fbafb" title=" " alt="" coords="1217,476,1380,525"/>
<area shape="rect" href="classDFLib_1_1Util_1_1Minimizer.html#af4cb8dd8cd1ee7c40a27e4ecbc219917" title=" " alt="" coords="988,403,1142,451"/>
<area shape="rect" href="classDFLib_1_1Proj_1_1Point.html#a50d73db1c4ff9d4037e4cc3ce276b433" title=" " alt="" coords="372,445,500,494"/>
<area shape="rect" href="classDFLib_1_1Proj_1_1Point.html#a11be19e976eab22485d9b8603dc31b6a" title="return true if user projection expects input in radians" alt="" coords="591,476,730,525"/>
</map>
</div>

</div>
</div>
<a id="a22bbaf61bdd53c73e5b167f522ca9683" name="a22bbaf61bdd53c73e5b167f522ca9683"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bbaf61bdd53c73e5b167f522ca9683">&#9670;&#160;</a></span>printCoords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printCoords </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>latlon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="SimpleDF_8cpp_a22bbaf61bdd53c73e5b167f522ca9683_icgraph.png" border="0" usemap="#aSimpleDF_8cpp_a22bbaf61bdd53c73e5b167f522ca9683_icgraph" alt=""/></div>
<map name="aSimpleDF_8cpp_a22bbaf61bdd53c73e5b167f522ca9683_icgraph" id="aSimpleDF_8cpp_a22bbaf61bdd53c73e5b167f522ca9683_icgraph">
<area shape="rect" title=" " alt="" coords="105,5,199,35"/>
<area shape="rect" href="SimpleDF_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,57,35"/>
</map>
</div>

</div>
</div>
<a id="a9597e5e8b03274abc9a499484ce2a497" name="a9597e5e8b03274abc9a499484ce2a497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9597e5e8b03274abc9a499484ce2a497">&#9670;&#160;</a></span>proj_dmstor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double proj_dmstor </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="SimpleDF_8cpp_a9597e5e8b03274abc9a499484ce2a497_icgraph.png" border="0" usemap="#aSimpleDF_8cpp_a9597e5e8b03274abc9a499484ce2a497_icgraph" alt=""/></div>
<map name="aSimpleDF_8cpp_a9597e5e8b03274abc9a499484ce2a497_icgraph" id="aSimpleDF_8cpp_a9597e5e8b03274abc9a499484ce2a497_icgraph">
<area shape="rect" title=" " alt="" coords="105,5,201,35"/>
<area shape="rect" href="SimpleDF_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title=" " alt="" coords="5,5,57,35"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
